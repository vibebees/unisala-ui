---
import MainLayout from '@/layouts/main-layout.astro';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { TextareaEditor } from '@/components/ui/textarea';
import { TextareaAutoGrow } from '@/components/ui/textAreaAutoGrow';
---

<MainLayout title='Create Post'>
    <div class='container max-w-screen-md mx-auto pt-12 pb-32'>
        <form id='postForm'>
            <div>
                <TextareaAutoGrow
                    client:only='react'
                    placeholder='Title'
                    className='min-h-[100px] border-none shadow-none focus:ring-0 px-0'
                    maxHeight='50vh'
                    name='title'
                />
            </div>
            <div>
                <TextareaEditor
                    client:only
                    placeholder='Tell your story...'
                    className='min-h-[70vh] text-xl border-none shadow-none focus:ring-0 px-0'
                    item={{}}
                    postData={{}}
                    setPostData={() => {}}
                    name='content'
                />
            </div>
        </form>
    </div>

    <div>
        <div class='container max-w-screen-md mx-auto'>
            <div class='flex items-center justify-between'>
                <Button type='submit' form='postForm'>Publish</Button>
            </div>
        </div>
    </div>
</MainLayout>

<style>
    /* Custom styles to remove default input and textarea styles */
    input,
    textarea {
        @apply bg-transparent;
    }
    input:focus,
    textarea:focus {
        @apply outline-none;
    }
</style>

<script>
    document
        .getElementById('postForm')
        .addEventListener('submit', function (e) {
            e.preventDefault();
            const formData = new FormData(this);
            const title = formData.get('title');
            const content = formData.get('content');

            // Here you can handle the form submission
            console.log('Title:', title);
            console.log('Content:', content);

            // You would typically send this data to your server here
            // For example:
            // fetch('/api/posts', {
            //     method: 'POST',
            //     body: JSON.stringify({ title, content }),
            //     headers: {
            //         'Content-Type': 'application/json'
            //     }
            // }).then(response => {
            //     if (response.ok) {
            //         // Handle successful submission
            //     } else {
            //         // Handle errors
            //     }
            // });
        });
</script>
